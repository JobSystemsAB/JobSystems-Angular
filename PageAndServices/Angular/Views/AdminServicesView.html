<script type="text/ng-template" id="tree_item_renderer.html">

    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <button class="accordion-toggle" data-toggle="collapse" data-parent="#{{parent.data.id}}" href="#{{parent.data.id}}"><i class="glyphicon glyphicon-chevron-down"></i></button>
                <a data-ng-click="changeSelected(parent.data)" style="margin-left: 20px; margin-top: 5px; cursor: pointer;">
                    {{ parent.data.order }} - {{ parent.data.name }}
                </a>
                <span class="pull-right">
                    id: {{ parent.data.id }} | nr: {{ parent.children.length }}
                </span>
            </h4>
        </div>
        <div id="{{ parent.data.id }}" class="panel-collapse collapse">
            <div class="panel-body" data-ng-show="parent.children.length > 0">
                <div data-ng-repeat="parent in parent.children | orderBy: 'data.order'" data-ng-include="'tree_item_renderer.html'"></div>
            </div>
        </div>
    </div>

</script>

<div style="display: block; position: fixed; bottom: 0; right: 0; margin: 20px; z-index: 100; width: 50%;" data-ng-controller="AlertController">
    <div data-alert="" data-ng-repeat="alert in alerts" data-type="alert.type" data-close="closeAlert($index)" style="margin: 0 auto;">
        {{ alert.msg }}
    </div>
</div>

<div style="margin: 20px">

    <b>Edit:</b> Select a category and change the fields to be edited and click on the "Update" button.
    <br />
    <b>Create:</b> Select the parent category, fill the information and click on the "Create" button.<br />
    <b>Delete:</b> Select a category and click on the "Delete" button. All child categories must be deleted first.<br />
    <br />

    <hr />

    <div class="row">

        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <h2>Categories:</h2>
            <hr />

            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <button class="accordion-toggle pull-left" data-toggle="collapse" data-parent="#accordion" href="#TOP"><i class="glyphicon glyphicon-chevron-down"></i></button>
                        <h4 class="panel-title pull-left" style="margin-left: 20px; margin-top: 5px; cursor: pointer;">
                            <a data-ng-click="changeSelected(null)">TOP
                            </a>
                        </h4>
                        <div class="clear"></div>
                    </div>
                    <div id="TOP" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div data-ng-repeat="parent in categoryTree.children | orderBy: 'data.order'" data-ng-include="'tree_item_renderer.html'"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">

            <h2>Edit:</h2>
            <hr />

            <button class="btn btn-success pull-right" data-ng-click="update()">Update</button>
            <button class="btn btn-danger pull-right" data-ng-click="delete()">Delete</button>
            <br />
            <br />

            Id:
            <input class="form-control" type="text" disabled="" data-ng-model="selected.id" style="width: 100%" /><br />
            <br />

            Name:
            <input class="form-control" type="text" data-ng-model="selected.name" style="width: 100%" /><br />
            <br />

            URL:
            <input class="form-control" type="text" data-ng-model="selected.url" style="width: 100%" /><br />
            <br />

            Salary:
            <input class="form-control" type="number" data-ng-model="selected.salary" style="width: 100%" /><br />
            <br />

            Order:

            <div class="input-group">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" data-ng-click="orderDown()"><i class="glyphicon glyphicon-chevron-left"></i></button>
                </span>
                <input class="form-control" type="text" disabled="" data-ng-model="selected.order" style="width: 100%" />
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" data-ng-click="orderUp()"><i class="glyphicon glyphicon-chevron-right"></i></button>
                </span>
            </div>

            <br />
            <br />

            ParentId:
            <input class="form-control" type="number" data-ng-model="selected.parentId" style="width: 100%" /><br />
            <br />

            Description:
            <textarea class="form-control" data-ng-model="selected.description" style="width: 100%; height: 100px"></textarea><br />
            <br />

            <button class="btn btn-success pull-right" data-ng-click="update()">Update</button>
            <button class="btn btn-danger pull-right" data-ng-click="delete()">Delete</button>

        </div>

        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <h2>New:</h2>
            <hr />

            <button class="btn btn-success pull-right" data-ng-click="create()">Create</button>
            <br />
            <br />

            Parent id:
            <input class="form-control" type="text" disabled="" data-ng-model="service.parent.id" style="width: 100%" /><br />
            <br />

            Name:
            <input class="form-control" type="text" data-ng-model="service.name" style="width: 100%" /><br />
            <br />

            URL:
            <input class="form-control" type="text" data-ng-model="service.url" style="width: 100%" /><br />
            <br />

            Salary:
            <input class="form-control" type="number" data-ng-model="service.salary" style="width: 100%" /><br />
            <br />

            Description:
            <textarea class="form-control" data-ng-model="service.description" style="width: 100%; height: 100px"></textarea><br />
            <br />

            <button class="btn btn-success pull-right" data-ng-click="create()">Create</button>
        </div>
    </div>

</div>


